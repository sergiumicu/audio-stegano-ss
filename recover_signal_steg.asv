function data=recover_signal_steg(prn, y, window_type)
    if nargin < 3
        window_type = 'hanning';
    elseif nargin == 3 
        if window_type ~= 'hanning' && window_type ~= 'rect'
            error(['Unknown window type ' window_type]);
        end
    end
    

    [r, K] = xcorr(y, prn);
    
    r = r(K>=0);
    K = K(K>=0);

    if window_type == 'hanning'
        r = conv(r, hanning(length(prn)), 'same');

    plot(K, r);
end